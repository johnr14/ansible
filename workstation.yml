###############################################################################
#
# Playbook workstation
# workstation.yml
#
# 21-2-18 Initial version v0.1
#
###############################################################################

---

- name : Fedora workstation playbook
  #hosts: '{{ target }}'
  hosts: FedoraWorkstation
  become: true
  serial: 1
  vars:
        
    # Repositories
    rpmfusion_nonfree: yes
    rpmfusion_free: yes
    # Packages
    base_packages: yes
    # Packages to be combined later
    archive_packages: yes
    codecs_packages: yes
    fonts_packages: yes
    hardware_packages: yes
    kde_packages: yes
    # Flatpack
    flakpack_flathub_enabled: yes
    flakpack_upgrade_all: yes
    flatpak_applications:
      - "com.valvesoftware.Steam"

  #tasks:
    #- name: Write results to logfile
      #blockinfile:
        #create: yes
        #path: "/var/log/ansible/log"
        #insertafter: BOF
        #block: "{{ validate.stdout }}"
        #marker: "# {{ inventory_hostname }} {mark}"
      #delegate_to: localhost
    
  roles:
    - common
    - repositories
    - packages
    - flatpak

# FIX SWAP AND HIBERNATE
# https://superuser.com/questions/1581885/btrfs-luks-swapfile-how-to-hibernate-on-swapfile
